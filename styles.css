/* styles.css â€” Yaddoo chat (cleaned)
   - Majlis night theme (single background image + soft overlay)
   - Simple, RTL-friendly chat alignment (Flexbox only)
   - Corner avatars + optional inline avatars
   - Reduced duplication, grouped sections
*/

/* ---------- Theme tokens ---------- */
:root {
  --bg-overlay-top: rgba(0, 0, 0, .25);
  --bg-overlay-bottom: rgba(0, 0, 0, .55);

  --ink: #2a211a;
  --ink-weak: #7f6f61;

  --paper-1: #f9f1db;
  --paper-2: #ead9b4;
  --paper-edge: #ffffff7a;

  --glow: #f2b552;
  --glow-2: #c7832c;

  --bubble-bot: #fff3cd;
  /* grandma */
  --bubble-user: #eaf1ff;
  /* me */

  --ring: 0 0 0 3px rgba(242, 181, 82, .36);
  --s1: 0 6px 18px rgba(0, 0, 0, .14);
  --s2: 0 14px 34px rgba(0, 0, 0, .28);
  --s3: 0 24px 70px rgba(0, 0, 0, .33);

  --wrap: 1120px;
  --r-lg: 20px;
  --fs-0: clamp(12px, 1.1vw, 13px);
  --fs-1: clamp(14px, 1.3vw, 16px);
  --fs-2: clamp(16px, 1.8vw, 20px);
  --fs-3: clamp(18px, 2.4vw, 26px);

  --vh: 1vh;
  /* set by JS for mobile */
}

/* ---------- Base ---------- */
* {
  box-sizing: border-box
}

html,
body {
  height: 100%
}

body {
  margin: 0;
  font-family: 'Noto Naskh Arabic', system-ui, -apple-system, "Segoe UI", Arial;
  color: var(--ink);
  /* one background only: your PNG + subtle dark overlay */
  background:
    linear-gradient(to bottom, var(--bg-overlay-top), var(--bg-overlay-bottom)),
    url('bg_majlis.png') center / cover no-repeat fixed;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  overflow-x: hidden;
}

/* ---------- Buttons ---------- */
.btn {
  border: 0;
  border-radius: 999px;
  cursor: pointer;
  padding: 10px 14px;
  font-weight: 800;
  font-size: var(--fs-1);
  transition: transform .15s ease, box-shadow .2s ease, filter .2s;
}

.btn.primary {
  color: #3b2b12;
  background: linear-gradient(180deg, var(--glow), var(--glow-2));
  box-shadow: 0 6px 16px rgba(0, 0, 0, .18)
}

.btn.primary.fill {
  width: 100%
}

.btn.ghost {
  color: #fff;
  background: rgba(255, 255, 255, .12);
  border: 1px solid rgba(255, 255, 255, .28)
}

.btn.ghost:hover {
  background: rgba(255, 255, 255, .20)
}

.btn.danger {
  color: #3a2a12;
  background: linear-gradient(180deg, #ffd1b3, #ffb38b)
}

.btn:active {
  transform: translateY(1px)
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--ring)
}

/* ---------- Shell ---------- */
.wrap {
  max-width: var(--wrap);
  margin: 0 auto;
  padding: clamp(12px, 2vw, 20px);
  position: relative;
  z-index: 1
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin: 4px 0 8px;
  color: #fff
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px
}

.badge {
  background: linear-gradient(180deg, var(--glow), var(--glow-2));
  color: #3b2b12;
  font-weight: 800;
  border-radius: 999px;
  padding: 6px 12px;
  box-shadow: var(--s1)
}

.topbar h1 {
  margin: 0;
  font-weight: 800;
  font-size: var(--fs-2);
  text-shadow: 0 2px 10px rgba(0, 0, 0, .35)
}

.actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap
}

/* ---------- Stage (grid) ---------- */
.stage {
  --hero-col: 200px;
  display: grid;
  grid-template-columns: var(--hero-col) 1fr;
  grid-template-rows: auto 1fr;
  grid-template-areas: "hero ." ". board";
  column-gap: clamp(12px, 3vw, 28px);
  row-gap: clamp(8px, 2vw, 18px);
  align-items: start;
  min-height: calc(var(--vh)*76);
  padding-block: clamp(10px, 2vw, 18px);
  position: relative;
}

/* ---------- Corner Avatars ---------- */
.avatar {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .3rem;
  font-weight: 700;
  color: #fff9e8;
  text-shadow: 0 0 5px rgba(255, 200, 120, .6)
}

.avatar img {
  width: 85px;
  height: 85px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 220, 160, .7), rgba(0, 0, 0, .1));
  box-shadow: 0 0 15px rgba(255, 180, 80, .4);
  transition: transform .3s ease, box-shadow .3s ease
}

.avatar img:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(255, 200, 100, .6)
}

.yaddoo-avatar {
  position: absolute;
  top: 2rem;
  right: 2rem
}

.user-avatar {
  position: absolute;
  bottom: 2rem;
  right: 2rem
}

/* ---------- Board (chat area) ---------- */
.board {
  grid-area: board;
  justify-self: end;
  align-self: start;
  width: min(860px, 96%);
  min-height: clamp(460px, 64vh, 78vh);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  border-radius: 20px;
  background: radial-gradient(120% 100% at 50% -32%, var(--paper-edge), transparent 38%), linear-gradient(180deg, var(--paper-1), var(--paper-2));
  outline: 1.5px solid rgba(255, 255, 255, .18);
  box-shadow: var(--s2);
}

.board::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(120% 140% at 50% 8%, transparent 60%, rgba(0, 0, 0, .06) 100%);
  pointer-events: none
}

/* ---------- Stream ---------- */
.chat {
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex: 1;
  overflow: auto;
  padding: clamp(12px, 2vw, 16px) 16px 92px;
  scroll-behavior: smooth
}

/* Row alignment: LEFT for bot, RIGHT for me (Flex only, no margins) */
.row {
  display: flex;
  align-items: flex-end;
  gap: 10px;
  justify-content: flex-start;
  width: 100%
}

.row.me {
  flex-direction: row-reverse;
  justify-content: flex-end;
  text-align: right
}

/* Bubbles */
.bubble {
  max-width: 72%;
  padding: clamp(8px, 1.4vw, 12px) clamp(12px, 2vw, 16px);
  border-radius: 16px;
  font-size: var(--fs-1);
  line-height: 1.65;
  background: #fff;
  border: 1px solid rgba(0, 0, 0, .05);
  box-shadow: 0 3px 10px rgba(0, 0, 0, .10);
  word-break: break-word;
  white-space: pre-wrap;
  transition: transform .2s ease, box-shadow .2s ease;
}

.bubble.bot {
  background: var(--bubble-bot)
}

.bubble.me {
  background: var(--bubble-user);
  border-top-right-radius: 4px
}

.row:hover .bubble {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, .14)
}

.meta {
  font-size: var(--fs-0);
  color: var(--ink-weak);
  margin-top: 4px
}

/* Composer */
.composer {
  display: flex;
  gap: 10px;
  padding: clamp(10px, 1.8vw, 12px);
  border-top: 1px solid rgba(0, 0, 0, .08);
  background: linear-gradient(180deg, rgba(255, 255, 255, .30), rgba(255, 255, 255, .55));
  position: relative;
  z-index: 1
}

.composer input {
  flex: 1;
  font-size: var(--fs-1);
  padding: 12px 16px;
  border-radius: 999px;
  border: 1px solid rgba(0, 0, 0, .18);
  background: #fffaf0;
  color: var(--ink);
  outline: none;
  transition: box-shadow .2s ease
}

.composer input::placeholder {
  color: #b29a7f
}

.composer input:focus-visible {
  box-shadow: var(--ring)
}

/* ---------- Inline avatars (optional) ---------- */
.msg-avatar {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  flex: 0 0 34px;
  object-fit: cover;
  background: radial-gradient(circle, rgba(255, 220, 160, .65), rgba(0, 0, 0, .08));
  box-shadow: 0 2px 6px rgba(0, 0, 0, .25), 0 0 12px rgba(242, 181, 82, .18);
}

.row .bubble {
  max-width: calc(100% - 48px)
}

/* leave space for .msg-avatar */

/* ---------- Login gate ---------- */
.gate {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: linear-gradient(180deg, rgba(0, 0, 0, .55), rgba(0, 0, 0, .60));
  z-index: 10;
  opacity: 1;
  visibility: visible;
  transition: opacity .25s ease, visibility .25s ease
}

.gate.hide {
  opacity: 0;
  visibility: hidden
}

.gate-card {
  width: min(540px, 92vw);
  background: radial-gradient(120% 100% at 50% 0%, #ffffffcc, #fff6dfcc 60%, #fff4d8cc 100%);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255, 255, 255, .6);
  border-radius: 16px;
  padding: 20px;
  box-shadow: var(--s3);
  transform: translateY(8px);
  animation: pop .28s ease-out forwards;
}

@keyframes pop {
  to {
    transform: translateY(0)
  }
}

.gate-card h2 {
  margin: 6px 0 14px;
  font-size: var(--fs-3);
  color: #3a2a12;
  text-align: center
}

.gate-row {
  display: flex;
  gap: 10px;
  align-items: center;
  margin: 12px 0
}

.gate-row>span {
  min-width: 72px
}

.gate-row input[type="text"] {
  flex: 1;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, .15);
  background: #fff
}

.gate-gender {
  border: none;
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
  justify-content: center
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 999px;
  background: #fff;
  border: 1px solid rgba(0, 0, 0, .12);
  cursor: pointer;
  user-select: none
}

.pill input {
  accent-color: #c7832c
}

.emoji {
  font-size: 20px
}

.muted {
  margin: 8px 0 0;
  color: #7b6b5b;
  font-size: var(--fs-0);
  text-align: center
}

/* ---------- Responsive ---------- */
@media (max-width:980px) {
  .stage {
    --hero-col: 160px
  }
}

@media (max-width:720px) {
  .stage {
    --hero-col: 120px;
    grid-template-areas: "hero ." "board board"
  }

  .board {
    justify-self: stretch;
    width: 100%
  }
}

@media (max-width:540px) {

  /* hide big corner avatars on phones */
  #yaddoo-avatar,
  #user-avatar {
    display: none
  }

  .bubble {
    max-width: 88%
  }
}

@media (prefers-reduced-motion:reduce) {
  * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important
  }
}